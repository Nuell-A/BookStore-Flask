{% extends "base.html" %}

{% block title %} Home {% endblock %}

{% block content %}
    <main class="container mt-3">
        <form action="#" class="search-form row justify-content-center" method="GET">
            <input type="text" class="search-field col-md-6" name="search" placeholder="Search for books...">
            <button type="submit" class="btn btn-light btn-sm col-md-2 col-sm-2 ms-1">Search</button>
        </form>
        <div class="search-results mt-3">
            {% if context.search %}
                <h5 class="text-center">Search results for {{ context.search }}:</h5>
                <div class="d-flex justify-content-center">
                    <ul class="list-group">
                        {% for book, author in context.search_results %}
                            <div class="d-flex justify-content-between">
                                <div class="card rounded list-group-item mt-1 mb-2">
                                    <h6 class="card-title">{{ book.title }}</h6>
                                    <p class="card-text text-secondary">{{ author }}</p>
                                    <p class="card-text">{{ book.description }}</p>
                                </div>
                                <button class="btn btn-light btn-sm add-to-cart-btn ms-1 mt-4" data-title="{{book.title}}" data-author="{{author}}" data-description="{{book.description}}">Add to Cart</button>
                            </div>
                        {% endfor %}
                    </ul>
                </div>
            {% else %}
                <div class="d-flex justify-content-center">
                    <ul class="list-group">
                        {% for result in context.random_results %}
                            <div class="d-flex justify-content-between">
                                <div class="card rounded list-group-item mt-1 mb-2">
                                    <h6 class="card-title">{{ result[0] }}</h6>
                                    <p class="card-text text-secondary">{{ result[1] }}</p>
                                    <p class="card-text">{{ result[2] }}</p>
                                </div>
                                <button class="btn btn-light btn-sm add-to-cart-btn ms-1 mt-4" data-title="{{result[0]}}" data-author="{{result[1]}}" data-description="{{result[2]}}">Add to Cart</button>
                            </div>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}
        </div>
    </main>
{% endblock %}